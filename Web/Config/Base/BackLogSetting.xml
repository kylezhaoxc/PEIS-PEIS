<?xml version="1.0" encoding="utf-8" ?>
<BackLogWorkLoad COLUMNS="ID,TEXT,PREVFLOW,NEXTFLOW,TRUESTATEKEY,FALSESTATEKEY,COLUMNSKEY,SQL"  TABLEKEY="SELECT * FROM [OnCustPhysicalExamInfo] LEFT JOIN [OnCustReportManage] ON [OnCustPhysicalExamInfo].ID_Customer=[OnCustReportManage].ID_Customer">
  <!--积案处理配置文件 xmhuang 20140819-->
  <!--1、ID：流程唯一标识（默认为拼音首字母）；-->
  <!--2、TEXT：流程显示名称；-->
  <!--1、PREVFLOW：上一流程；-->
  <!--2、NEXTFLOW下一流程TBKEY;-->
  <!--3、TRUESTATEKEY：正常完成状态标识字段；-->
  <!--4、FALSESTATEKEY：未完成状态标识字段；-->
  <!--TRUESTATEKEY &　FALSESTATEKEY　字段只接受true/false 或0、1;-->
  <!--5、DATEKEY：日期限制字段；-->
  <!--为了动态设置UI前端显示的Headr值，在前置流程和终止流程数据后以下划线拼接中文列名，并必须设置前置到后置流程的列名为PrevOper(操作人)、PrevOperDate(操作时间)、NextOper(终止流程操作人),NextOperDate(终止流程操作时间)-->

  <WorkFlowItem ID="wwcwldj" TEXT="网上预约->未登记" PREVFLOW="" NEXTFLOW="" COLUMNSKEY="预约人,预约时间,登记人,登记时间" SQL=" SELECT ID_Customer,CustomerName,GenderName,MarriageName,CONVERT(varchar(10),BirthDay,120) BirthDay,MobileNo,SubScriber PrevOper,CONVERT(varchar(20),SubScribDate,120) PrevOperDate,Operator NextOper,CONVERT(varchar(20),OperateDate,120) NextOperDate FROM OnCustPhysicalExamInfo WHERE [OnCustPhysicalExamInfo].[Is_InternatSubscribe]=1 AND DATEDIFF(DY,[OnCustPhysicalExamInfo].[SubScribDate],getdate())>={0} AND [OnCustPhysicalExamInfo].[OperateDate] IS NULL" TRUESTATEKEY="[OnCustPhysicalExamInfo].[Is_InternatSubscribe]=1 AND DATEDIFF(DY,[OnCustPhysicalExamInfo].[SubScribDate],getdate())>={0}" FALSESTATEKEY="[OnCustPhysicalExamInfo].[OperateDate] IS NULL"></WorkFlowItem>

  <WorkFlowItem ID="wwcdj" TEXT="预约->未登记" PREVFLOW="" NEXTFLOW="" COLUMNSKEY="预约人,预约时间,登记人,登记时间" SQL=" SELECT ID_Customer,CustomerName,GenderName,MarriageName,CONVERT(varchar(10),BirthDay,120) BirthDay,MobileNo,SubScriber PrevOper,CONVERT(varchar(20),SubScribDate,120) PrevOperDate,Operator NextOper,CONVERT(varchar(20),OperateDate,120) NextOperDate FROM OnCustPhysicalExamInfo WHERE [OnCustPhysicalExamInfo].[Is_Subscribed]=1 AND DATEDIFF(DY,[OnCustPhysicalExamInfo].[SubScribDate],getdate())>={0} AND [OnCustPhysicalExamInfo].[OperateDate] IS NULL" TRUESTATEKEY="[OnCustPhysicalExamInfo].[Is_Subscribed]=1 AND DATEDIFF(DY,[OnCustPhysicalExamInfo].[SubScribDate],getdate())>={0}" FALSESTATEKEY="[OnCustPhysicalExamInfo].[OperateDate] IS NULL"></WorkFlowItem>

  <WorkFlowItem ID="wwcjf" TEXT="登记->未缴费" PREVFLOW="" NEXTFLOW="" COLUMNSKEY="登记人,登记时间,收费人,收费时间" SQL=" SELECT ID_Customer,CustomerName,GenderName,MarriageName,CONVERT(varchar(10),BirthDay,120) BirthDay,MobileNo,Operator PrevOper,CONVERT(varchar(20),OperateDate,120) PrevOperDate,'缴费人' NextOper,'缴费时间' NextOperDate FROM OnCustPhysicalExamInfo WHERE [OnCustPhysicalExamInfo].[OperateDate] IS NOT NULL AND [OnCustPhysicalExamInfo].[Is_FeeSettled]!=1 AND DATEDIFF(DY,[OnCustPhysicalExamInfo].[OperateDate],getdate())>={0} " DATEKEY="[OnCustPhysicalExamInfo].[Operator],CONVERT(varchar(20),[OnCustPhysicalExamInfo].[OperateDate],120) OperateDate,'',''" TRUESTATEKEY="[OnCustPhysicalExamInfo].[OperateDate] IS NOT NULL AND DATEDIFF(DY,[OnCustPhysicalExamInfo].[OperateDate],getdate())>={0}" FALSESTATEKEY="[OnCustPhysicalExamInfo].[Is_FeeSettled]!=1"></WorkFlowItem>

  <WorkFlowItem ID="wwcfj" TEXT="指引单打印->未分科检查" PREVFLOW="" COLUMNSKEY="回收人,回收时间,分检医生,分检时间" SQL=" SELECT ID_Customer,CustomerName,GenderName,MarriageName,CONVERT(varchar(10),BirthDay,120) BirthDay,MobileNo,GuideSheetReturnedby PrevOper,'未获取到指引单打印时间' PrevOperDate,'未获取到分检医生' NextOper,'未获分检开始时间' NextOperDate FROM OnCustPhysicalExamInfo WHERE [OnCustPhysicalExamInfo].[Is_GuideSheetPrinted]=1 AND [OnCustPhysicalExamInfo].[Is_ExamStarted]!=1 AND DATEDIFF(DY,[OnCustPhysicalExamInfo].[GuideSheetPrintedDate],getdate())>={0} " NEXTFLOW="" TRUESTATEKEY="[OnCustPhysicalExamInfo].[Is_GuideSheetPrinted]=1 AND DATEDIFF(DY,[OnCustPhysicalExamInfo].[GuideSheetPrintedDate],getdate())>={0}" FALSESTATEKEY="[OnCustPhysicalExamInfo].[Is_ExamStarted]!=1"></WorkFlowItem>

  <WorkFlowItem ID="wwczj" TEXT="分科体检->未回收指引单" PREVFLOW="" NEXTFLOW=""  COLUMNSKEY="分检医生,分检时间,总检医生,总检时间" SQL="SELECT ID_Customer,CustomerName,GenderName,MarriageName,CONVERT(varchar(10),BirthDay,120) BirthDay,MobileNo,ExamStartedDate PrevOper,ExamStartedDoctor PrevOperDate,FinalDoctor NextOper,FinalDate NextOperDate FROM OnCustPhysicalExamInfo WHERE [OnCustPhysicalExamInfo].[Is_ExamStarted]=1 AND [OnCustPhysicalExamInfo].[Is_GuideSheetReturned]!=1 AND DATEDIFF(DY,[OnCustPhysicalExamInfo].[ExamStartedDate],getdate())>={0}" TRUESTATEKEY="[OnCustPhysicalExamInfo].[Is_ExamStarted]=1 AND DATEDIFF(DY,[OnCustPhysicalExamInfo].[ExamStartedDate],getdate())>={0}" FALSESTATEKEY="[OnCustPhysicalExamInfo].[Is_Checked]!=1"></WorkFlowItem>

  <WorkFlowItem ID="wwczs" TEXT="回收指引单->未总检" PREVFLOW="" NEXTFLOW=""  COLUMNSKEY="总检医生,总检时间,总审医生,总审时间" SQL="SELECT ID_Customer,CustomerName,GenderName,MarriageName,CONVERT(varchar(10),BirthDay,120) BirthDay,MobileNo,FinalDoctor PrevOper,FinalDate PrevOperDate,Checker NextOper,CheckedDate NextOperDate FROM OnCustPhysicalExamInfo WHERE [OnCustPhysicalExamInfo].[Is_FinalFinished]!=1 AND [OnCustPhysicalExamInfo].[Is_GuideSheetReturned]=1 AND DATEDIFF(DY,[OnCustPhysicalExamInfo].[CheckedDate],getdate())>={0} " TRUESTATEKEY="[OnCustPhysicalExamInfo].[Is_Checked]=1 AND DATEDIFF(DY,[OnCustPhysicalExamInfo].[Checked],getdate())>={0}" FALSESTATEKEY="[OnCustPhysicalExamInfo].[Is_FinalFinished]!=1"></WorkFlowItem>

  <WorkFlowItem ID="wwczydhs" TEXT="总检->未总审" PREVFLOW="" NEXTFLOW="" COLUMNSKEY="总审医生,总审时间,回收人员,回收时间" SQL="SELECT ID_Customer,CustomerName,GenderName,MarriageName,CONVERT(varchar(10),BirthDay,120) BirthDay,MobileNo,Checker PrevOper,CheckedDate PrevOperDate,GuideSheetReturnedby NextOper,GuideSheetReturnedDate NextOperDate FROM OnCustPhysicalExamInfo WHERE [OnCustPhysicalExamInfo].[Is_FinalFinished]=1 AND [OnCustPhysicalExamInfo].[Is_Checked]!=1 AND DATEDIFF(DY,[OnCustPhysicalExamInfo].[CheckedDate],getdate())>={0}" TRUESTATEKEY="[OnCustPhysicalExamInfo].[Is_FinalFinished]=1 AND DATEDIFF(DY,[OnCustPhysicalExamInfo].[FinalDate],getdate())>={0}" FALSESTATEKEY="[OnCustPhysicalExamInfo].[Is_GuideSheetPrinted]!=1"></WorkFlowItem>

  <WorkFlowItem ID="wwcbgdy" TEXT="总审->未打印报告" PREVFLOW="" NEXTFLOW="" COLUMNSKEY="回收人员,回收时间,报告打印人,报告打印时间" SQL="SELECT [OnCustPhysicalExamInfo].ID_Customer,CustomerName,GenderName,MarriageName,CONVERT(varchar(10),BirthDay,120) BirthDay,MobileNo,GuideSheetReturnedby PrevOper,GuideSheetReturnedDate PrevOperDate,ReportPrinter NextOper,ReportPrintedDate NextOperDate FROM OnCustPhysicalExamInfo LEFT JOIN OnCustReportManage ON [OnCustPhysicalExamInfo].ID_Customer=[OnCustReportManage].ID_Customer WHERE [OnCustPhysicalExamInfo].[Is_Checked]=1 AND [OnCustReportManage].[Is_ReportPrinted]!=1 AND DATEDIFF(DY,[OnCustPhysicalExamInfo].[GuideSheetReturnedDate],getdate())>={0}" TRUESTATEKEY="[OnCustPhysicalExamInfo].[Is_GuideSheetReturned]=1 AND DATEDIFF(DY,[OnCustPhysicalExamInfo].[GuideSheetReturnedDate],getdate())>={0}" FALSESTATEKEY="[OnCustReportManage].[Is_ReportPrinted]!=1"></WorkFlowItem>

  <WorkFlowItem ID="wwcbgtz" TEXT="报告打印->未报告通知" PREVFLOW="" NEXTFLOW="" COLUMNSKEY="报告打印人,报告打印时间,通知人,通知时间" SQL="SELECT [OnCustPhysicalExamInfo].ID_Customer,CustomerName,GenderName,MarriageName,CONVERT(varchar(10),BirthDay,120) BirthDay,MobileNo,ReportPrinter PrevOper,ReportPrintedDate PrevOperDate,Informer NextOper,InformedDate NextOperDate FROM OnCustPhysicalExamInfo LEFT JOIN OnCustReportManage ON [OnCustPhysicalExamInfo].ID_Customer=[OnCustReportManage].ID_Customer WHERE [OnCustReportManage].[Is_ReportPrinted]=1 AND [OnCustReportManage].[Is_Informed]!=1 AND DATEDIFF(DY,[OnCustReportManage].[ReportPrintedDate],getdate())>={0}" TRUESTATEKEY="[OnCustReportManage].[Is_ReportPrinted]=1 AND DATEDIFF(DY,[OnCustReportManage].[ReportPrintedDate],getdate())>={0}" FALSESTATEKEY="[OnCustReportManage].[Is_Informed]!=1"></WorkFlowItem>

  <WorkFlowItem ID="wwcbglq" TEXT="报告通知->未报告领取"  PREVFLOW="" NEXTFLOW="" COLUMNSKEY=" 通知人,通知时间,领取人,领取时间" SQL="SELECT [OnCustPhysicalExamInfo].ID_Customer,CustomerName,GenderName,MarriageName,CONVERT(varchar(10),BirthDay,120) BirthDay,MobileNo,Informer PrevOper,InformedDate PrevOperDate,ReportOffer NextOper,ReportOffDate NextOperDate FROM OnCustPhysicalExamInfo LEFT JOIN OnCustReportManage ON [OnCustPhysicalExamInfo].ID_Customer=[OnCustReportManage].ID_Customer WHERE [OnCustReportManage].[Is_Informed]=1 AND [OnCustReportManage].[Is_ReportReceipted]!=1 AND DATEDIFF(DY,[OnCustReportManage].[InformedDate],getdate())>={0}" TRUESTATEKEY="[OnCustReportManage].[Is_Informed]=1 AND DATEDIFF(DY,[OnCustReportManage].[InformedDate],getdate())>={0}" FALSESTATEKEY="[OnCustReportManage].[Is_ReportReceipted]!=1"></WorkFlowItem>

  <WorkFlowItem ID="wwczydrk" TEXT="报告领取->未扫描指引单" PREVFLOW="" NEXTFLOW="" COLUMNSKEY="领取人,领取时间,指引单扫描人,扫描时间" SQL="" TRUESTATEKEY="" FALSESTATEKEY=""></WorkFlowItem>

</BackLogWorkLoad>
<!--积案处理配置文件 xmhuang 20140819-->